---
import { Button } from "@/components/ui/button";
import ShimmerButton from './ShimmerButton.astro';
import { Icon } from 'astro-icon/components';

const services = [
  { name: "Ceramic Coating", href: "/services/ceramic-coating" },
  { name: "Paint Protection Film", href: "/services/paint-protection-film" },
  { name: "Paint Correction & Polish", href: "/services/polish" },
  { name: "Window Film", href: "/services/window-film" },
  { name: "Premium Car Wash", href: "/services/premium-car-wash" },
];
---

<nav
  x-data="{ mobileMenuOpen: false, servicesOpen: false }"
  class="fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-md border-b border-border"
>
  <div class="container mx-auto px-6 py-4 flex items-center justify-between">
    <div class="flex items-center gap-2">
      <a href="/" class="flex items-center">
        <img src="/wrp-logo.svg" alt="WRP Logo" class="h-10 w-auto" />
      </a>
    </div>
    <div class="hidden md:flex items-center gap-8 text-sm tracking-wide">
      <!-- Services Dropdown -->
      <div class="relative" x-data="{ open: false }" @mouseenter="open = true" @mouseleave="open = false">
        <button
          class="hover:text-muted-foreground transition-colors flex items-center gap-1"
          @click="open = !open"
        >
          SERVICES
          <Icon name="lucide:chevron-down" class="h-4 w-4" />
        </button>
        <div
          x-show="open"
          x-cloak
          x-transition
          class="absolute top-full left-0 mt-2 w-64 bg-background border border-border shadow-lg py-2"
        >
          {services.map((service) => (
            <a
              href={service.href}
              class="block px-4 py-3 hover:bg-muted transition-colors text-sm"
            >
              {service.name}
            </a>
          ))}
        </div>
      </div>
      <a href="/portfolio" class="hover:text-muted-foreground transition-colors">
        PORTFOLIO
      </a>
      <a href="/more-about-wrp" class="hover:text-muted-foreground transition-colors">
        ABOUT
      </a>
      <a href="/contact-us" class="hover:text-muted-foreground transition-colors">
        CONTACT
      </a>
    </div>
    <ShimmerButton href="/contact-us" className="hidden md:flex">
      BOOK APPOINTMENT
    </ShimmerButton>
    <button
      class="md:hidden z-50"
      @click="mobileMenuOpen = !mobileMenuOpen"
      aria-label="Toggle menu"
    >
      <Icon name="lucide:menu" class="h-6 w-6" x-show="!mobileMenuOpen" />
      <Icon name="lucide:x" class="h-6 w-6" x-show="mobileMenuOpen" x-cloak />
    </button>
  </div>

  <!-- Mobile Menu -->
  <div
    x-show="mobileMenuOpen"
    x-cloak
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0 max-h-0"
    x-transition:enter-end="opacity-100 max-h-screen"
    x-transition:leave="transition ease-in duration-200"
    x-transition:leave-start="opacity-100 max-h-screen"
    x-transition:leave-end="opacity-0 max-h-0"
    class="md:hidden absolute top-full left-0 right-0 bg-background border-b border-border overflow-hidden"
  >
    <div class="container mx-auto px-6 py-6 flex flex-col gap-6">
      <!-- Services Section -->
      <div class="text-xs text-muted-foreground uppercase tracking-wider mb-2">Services</div>
      <div class="ml-4 flex flex-col gap-4">
        {services.map((service) => (
          <a
            href={service.href}
            class="text-base hover:text-muted-foreground transition-colors"
            @click="mobileMenuOpen = false"
          >
            {service.name}
          </a>
        ))}
      </div>

      <div class="border-t border-border pt-4"></div>

      <a
        href="/portfolio"
        class="text-lg tracking-wide hover:text-muted-foreground transition-colors"
        @click="mobileMenuOpen = false"
      >
        PORTFOLIO
      </a>
      <a
        href="/more-about-wrp"
        class="text-lg tracking-wide hover:text-muted-foreground transition-colors"
        @click="mobileMenuOpen = false"
      >
        ABOUT
      </a>
      <a
        href="/contact-us"
        class="text-lg tracking-wide hover:text-muted-foreground transition-colors"
        @click="mobileMenuOpen = false"
      >
        CONTACT
      </a>
      <Button className="w-full" @click="mobileMenuOpen = false">
        <a href="/contact-us" class="w-full">BOOK APPOINTMENT</a>
      </Button>
    </div>
  </div>
</nav>
