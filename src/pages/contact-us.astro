---
import { Button } from "@/components/ui/button";

export const prerender = false; // This page needs to be server-rendered for D1 access
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="Contact WRP Dubai - Premium car detailing studio in Al Qusais, Dubai. Call +971 54 717 3000" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>Contact Us | WRP Dubai - Premium Car Detailing</title>
    <link rel="stylesheet" href="/src/styles/global.css" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Inter:wght@400;500;600;700&family=Montserrat:ital,wght@1,900&display=swap" rel="stylesheet" />

    <style>
      [x-cloak] { display: none !important; }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="bg-background border-b border-border">
      <div class="container mx-auto px-6 py-4">
        <a href="/" class="text-2xl font-logo font-black italic">WRP.</a>
      </div>
    </nav>

    <!-- Hero Section -->
    <section class="py-20 px-6 bg-muted">
      <div class="container mx-auto max-w-4xl text-center">
        <p class="text-sm tracking-[0.3em] mb-4 font-mono uppercase text-muted-foreground">GET IN TOUCH</p>
        <h1 class="font-serif text-5xl md:text-6xl font-bold mb-6">Contact WRP Dubai</h1>
        <p class="text-xl text-muted-foreground max-w-2xl mx-auto">
          Experience premium car detailing excellence. Reach out for a free consultation and quote.
        </p>
      </div>
    </section>

    <!-- Contact Information & Form -->
    <section class="py-20 px-6">
      <div class="container mx-auto max-w-6xl">
        <div class="grid md:grid-cols-2 gap-12">
          <!-- Contact Info -->
          <div>
            <h2 class="font-serif text-3xl font-bold mb-8">Visit Our Studio</h2>

            <div class="space-y-6 mb-12">
              <div>
                <h3 class="font-bold mb-2">Location</h3>
                <p class="text-muted-foreground">
                  Al Qusais Industrial Area 1<br />
                  Dubai, UAE
                </p>
              </div>

              <div>
                <h3 class="font-bold mb-2">Phone</h3>
                <a href="tel:+971547173000" class="text-muted-foreground hover:text-foreground transition-colors">
                  +971 54 717 3000
                </a>
              </div>

              <div>
                <h3 class="font-bold mb-2">Email</h3>
                <a href="mailto:wrpdetailing@gmail.com" class="text-muted-foreground hover:text-foreground transition-colors">
                  wrpdetailing@gmail.com
                </a>
              </div>

              <div>
                <h3 class="font-bold mb-2">Social Media</h3>
                <a href="https://instagram.com/wrp_ae" target="_blank" rel="noopener" class="text-muted-foreground hover:text-foreground transition-colors">
                  @wrp_ae
                </a>
              </div>
            </div>

            <div class="bg-muted p-6 rounded-lg">
              <h3 class="font-bold mb-4">Opening Hours</h3>
              <div class="space-y-2 text-muted-foreground">
                <p>Monday - Saturday: 8:00 AM - 7:00 PM</p>
                <p>Sunday: 10:00 AM - 5:00 PM</p>
              </div>
            </div>
          </div>

          <!-- Contact Form -->
          <div>
            <h2 class="font-serif text-3xl font-bold mb-8">Send Us a Message</h2>

            <form
              x-data="{
                submitting: false,
                success: false,
                error: '',
                async submitForm(event) {
                  event.preventDefault();
                  this.submitting = true;
                  this.error = '';

                  try {
                    const formData = new FormData(event.target);
                    const response = await fetch('/api/contact', {
                      method: 'POST',
                      body: formData
                    });

                    const result = await response.json();

                    if (result.success) {
                      this.success = true;
                      event.target.reset();
                    } else {
                      this.error = result.error || 'Something went wrong';
                    }
                  } catch (err) {
                    this.error = 'Network error. Please try again or call us directly.';
                  } finally {
                    this.submitting = false;
                  }
                }
              }"
              @submit="submitForm($event)"
              class="space-y-6"
            >
              <!-- Name Field -->
              <div>
                <label for="name" class="block font-medium mb-2">Name *</label>
                <input
                  type="text"
                  id="name"
                  name="name"
                  required
                  class="w-full px-4 py-3 border border-input rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-ring"
                  placeholder="Your full name"
                />
              </div>

              <!-- Email Field -->
              <div>
                <label for="email" class="block font-medium mb-2">Email *</label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  class="w-full px-4 py-3 border border-input rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-ring"
                  placeholder="your.email@example.com"
                />
              </div>

              <!-- Phone Field -->
              <div>
                <label for="phone" class="block font-medium mb-2">Phone</label>
                <input
                  type="tel"
                  id="phone"
                  name="phone"
                  class="w-full px-4 py-3 border border-input rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-ring"
                  placeholder="+971 XX XXX XXXX"
                />
              </div>

              <!-- Service Interest -->
              <div>
                <label for="service" class="block font-medium mb-2">Service of Interest</label>
                <select
                  id="service"
                  name="service"
                  class="w-full px-4 py-3 border border-input rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-ring"
                >
                  <option value="">Select a service</option>
                  <option value="ceramic-coating">Ceramic Coating</option>
                  <option value="paint-protection-film">Paint Protection Film (PPF)</option>
                  <option value="polish">Paint Correction & Polish</option>
                  <option value="window-film">Window Tinting</option>
                  <option value="premium-car-wash">Premium Car Wash</option>
                </select>
              </div>

              <!-- Message Field -->
              <div>
                <label for="message" class="block font-medium mb-2">Message *</label>
                <textarea
                  id="message"
                  name="message"
                  required
                  rows="5"
                  class="w-full px-4 py-3 border border-input rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-ring resize-none"
                  placeholder="Tell us about your vehicle and what service you're interested in..."
                ></textarea>
              </div>

              <!-- Submit Button -->
              <Button size="lg" className="w-full" type="submit" :disabled="submitting">
                <span x-show="!submitting">Send Message</span>
                <span x-show="submitting" x-cloak>Sending...</span>
              </Button>

              <!-- Success Message -->
              <div
                x-show="success"
                x-transition
                class="p-4 bg-green-50 border border-green-200 rounded-lg text-green-800"
              >
                <p class="font-bold">Message sent successfully!</p>
                <p class="text-sm mt-1">We'll get back to you within 24 hours.</p>
              </div>

              <!-- Error Message -->
              <div
                x-show="error"
                x-transition
                class="p-4 bg-red-50 border border-red-200 rounded-lg text-red-800"
                x-text="error"
              >
              </div>
            </form>
          </div>
        </div>
      </div>
    </section>

    <footer class="bg-background border-t border-border py-8 px-6 text-center text-muted-foreground">
      <p>&copy; 2025 WRP Dubai. All rights reserved.</p>
    </footer>
  </body>
</html>
